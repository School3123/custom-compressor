# 🗜️ Extreme Compression V3.2 アプリケーション説明書

## 1. 概要
本アプリケーションは、Python標準ライブラリで利用可能な最強クラスの圧縮アルゴリズム「LZMA2」を独自にチューニングし、一般的なZIP形式を凌駕する圧縮率を実現するツールです。
GitHub Codespaces（クラウド環境）上で動作し、ブラウザを通じてファイルの圧縮・解凍を行います。

## 2. 主な特徴
*   **極限圧縮 (Extreme Compression)**: 辞書サイズを128MBに拡張したLZMA2アルゴリズムを使用し、特にテキストデータやログ、ソースコードに対して圧倒的な圧縮効率を発揮します。
*   **ソリッド圧縮 (Solid Compression)**: 複数のファイルを連結してから圧縮するため、ファイルまたがりの重複データも圧縮対象とし、効率を最大化します。
*   **独自コンテナ形式 (.mycmp)**: 独自のバイナリヘッダー (`MYCP_V3`) を付与し、拡張子が変更されていてもファイルの正当性を検証可能です。
*   **選択的圧縮**: アップロードしたファイルの中から、必要なものだけを選んで圧縮できます。

## 3. セットアップと起動方法（GitHub Codespaces）

1.  **環境構築**
    Codespacesのターミナルで以下のコマンドを実行し、必要なライブラリをインストールします。
    ```bash
    pip install streamlit
    ```

2.  **アプリの起動**
    以下のコマンドを実行します。
    ```bash
    streamlit run app.py
    ```

3.  **ブラウザで開く**
    ターミナル右下に表示される通知、または「PORTS」タブからポート `8501` の地球儀アイコンをクリックしてアプリを開きます。

## 4. 使い方：圧縮 (Compress)

1.  **ファイルのアップロード**
    *   画面左側の「1. ファイルをアップロード」エリアに、圧縮したいファイルをドラッグ＆ドロップします（複数可）。
    *   ファイルは自動的にサーバー（Codespaces）上の `input_files` フォルダに保存されます。

2.  **対象の選択**
    *   アップロードされたファイルが「2. 圧縮対象を選択」のリストに表示されます。
    *   圧縮したいファイルにチェックを入れます（デフォルトですべて選択されています）。

3.  **圧縮の実行**
    *   「出力ファイル名」を入力します（拡張子は不要です）。
    *   「🚀 圧縮開始」ボタンをクリックします。
    *   処理が完了すると、削減率（%）が表示され、「⬇️ ダウンロード」ボタンから `.mycmp` ファイルを保存できます。

## 5. 使い方：解凍 (Decompress)

1.  **ファイルのアップロード**
    *   「📥 解凍 (Decompress)」タブに切り替えます。
    *   独自形式ファイル（`.mycmp`）をアップロードします。
    *   **※拡張子不問機能**: ファイルの拡張子が `.dat` や `.bin` 等に変更されていても、中身が正しい独自形式であれば認識可能です。

2.  **検証と解凍**
    *   「🔍 解凍開始」ボタンをクリックします。
    *   アプリがバイナリヘッダー（マジックナンバー）を解析し、正規のファイルであることを検証してから解凍を行います。

3.  **ダウンロード**
    *   解凍に成功すると、中身のファイル一覧が表示されます。
    *   各ファイルの「⬇️ ダウンロード」ボタンを押して、個別にPCへ保存してください。

## 6. 技術仕様

*   **コンテナ識別子**: `MYCP_V3` (Hex: `4D 59 43 50 5F 56 33`)
*   **圧縮アルゴリズム**: LZMA2 (XZ format)
    *   Preset: 9 (Extreme)
    *   Dictionary Size: 128 MB
    *   Match Finder: BT4
*   **アーカイブ構造**:
    `[Magic Number (7bytes)]` + `[XZ Stream (Tar Archive)]`

## 7. 注意事項

*   **処理時間**: 圧縮設定を極限まで高めているため、GB単位の巨大なファイルの圧縮には時間がかかる場合があります。
*   **メモリ使用量**: 辞書サイズを大きく取っているため、解凍時にも一定のメモリを消費します。
*   **永続性**: Codespaces上のファイル（workspaceフォルダ）は、Codespacesを削除またはリビルドすると消去されます。必要なデータは必ずダウンロードして手元に保存してください。
