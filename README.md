# 🗜️ Ultra Compressor V13 (Ultimate Edition) 操作説明書

## 1. アプリケーション概要
本アプリケーションは、GitHub Codespaces（クラウド環境）上で動作する**超高圧縮・多機能アーカイバ**です。
Python標準ライブラリの限界に挑み、一般的なZIP形式を凌駕する圧縮率と、クラウド環境でも快適に動作する操作性を実現しています。

### 主な特徴
*   **最強の圧縮率**: LZMA2アルゴリズム（辞書サイズ256MB）を採用。
*   **スマートソート**: ファイルの中身（ヘッダー）を解析し、似たファイルを隣接させて圧縮効率を最大化。
*   **重複排除 (Deduplication)**: まったく同じファイルは「リンク」として記録し、容量を消費しません。
*   **選択的解凍**: アーカイブをすべて解凍することなく、中身を確認して必要なファイルだけを取り出せます。
*   **リアルタイム進捗**: GB単位の巨大なファイルでも、バイト単位で正確な進捗状況を表示します。

---

## 2. セットアップと起動方法

GitHub Codespacesのターミナルで以下の手順を実行してください。

### 手順1: ライブラリのインストール
初回のみ、以下のコマンドを実行してUIフレームワークをインストールします。
```bash
pip install streamlit
```

### 手順2: アプリの起動
以下のコマンドでアプリケーションを起動します。
```bash
python -m streamlit run app.py
```

### 手順3: ブラウザで開く
起動後、ターミナル右下に表示される通知、または「PORTS」タブからポート **8501** の地球儀アイコン（Open in Browser）をクリックして画面を開きます。

---

## 3. 圧縮手順 (Compress)

1.  **ファイルのアップロード**
    *   画面上のタブを **「📤 Compress (圧縮)」** に合わせます。
    *   **「1. Add Files」** エリアに、圧縮したいファイルをドラッグ＆ドロップします（複数選択可）。
    *   ファイルは自動的にサーバーへ転送されます。

2.  **設定と実行**
    *   必要に応じて **「Filename」** (出力ファイル名) を変更します。
    *   **「🚀 Start Compression」** ボタンをクリックします。
    *   独自のアルゴリズム（重複排除・メタデータ削除・ソート）が自動的に適用され、圧縮が始まります。

3.  **ダウンロード**
    *   処理が完了すると、削減率（Reduction）などの結果が表示されます。
    *   **「⬇️ Download (.mycmp)」** ボタンを押して、圧縮ファイルをPCに保存してください。
    *   *(オプション)* 「🔄 Copy to Decompress Tab」を押すと、ダウンロードせずにそのまま解凍タブへ転送してテストできます。

---

## 4. 解凍手順 (Decompress / Selective Extract)

本アプリは、**「中身を見てから解凍する」** 機能を搭載しています。

1.  **アーカイブの読み込み**
    *   画面上のタブを **「📥 Decompress (選択解凍)」** に合わせます。
    *   **「1. Load & Scan」** エリアに、独自形式ファイル（`.mycmp`）をアップロードします。

2.  **スキャン実行**
    *   リストボックスから対象のファイルを選択し、**「🔍 Scan Contents」** ボタンを押します。
    *   **解凍処理を行わずに**、アーカイブ内部のファイル構造のみを高速に解析します。

3.  **ファイルの選択と解凍**
    *   **「2. Select & Extract」** エリアに、ファイルの一覧が表示されます。
    *   解凍したいファイルにチェックを入れます（デフォルトでは全選択されています）。
    *   **「🔓 Extract Selected」** ボタンをクリックします。

4.  **ファイルの取得**
    *   解凍されたファイルが一覧表示されます。
    *   各ファイルの左側にある **「⬇️」** ボタンを押して、個別にダウンロードしてください。

---

## 5. 技術仕様・注意事項

*   **独自形式 (.mycmp)**:
    *   本アプリ専用のコンテナフォーマットです。
    *   識別子: `MYCP_ULT` (V13)
    *   **注意**: 一般的な解凍ソフト（7-ZipやWinRAR）では解凍できません。解凍には必ず本アプリを使用してください。
*   **データの永続性**:
    *   Codespaces上のデータ（アップロードしたファイルや解凍後のファイル）は、環境をリビルドまたは削除すると消去されます。必要なデータは必ずダウンロードして手元に保管してください。
*   **メモリ制限**:
    *   本アプリは高圧縮を実現するため、多くのメモリを使用します。数GBを超える超巨大ファイルを扱う場合、ブラウザやCodespacesのメモリ制限により動作が遅くなる場合があります。

---

## 6. トラブルシューティング

*   **Q. "AxiosError" や "Network Error" が出る**
    *   A. 処理が重すぎてサーバーとの通信が切断された可能性があります。ブラウザをリロード（再読み込み）してください。
*   **Q. 以前のバージョンで作成したファイルは解凍できる？**
    *   A. `MYCP` で始まるヘッダーを持つファイルであれば、基本的に解凍可能です。ただし、BCJフィルターを使用した旧試作版（V10など）はエラーになる場合があります。
*   **Q. 解凍ボタンを押しても何も起きない**
    *   A. まず「🔍 Scan Contents」を押して、中身のリストを取得してから解凍を実行してください。
